"use strict";(self.webpackChunkEcomer=self.webpackChunkEcomer||[]).push([[762],{2762:(b,c,a)=>{a.r(c),a.d(c,{ForgotPasswordComponent:()=>Z});var p=a(6814),n=a(95),t=a(4769),l=a(9862);let g=(()=>{class s{constructor(o){this._HttpClient=o,this.baseUrl="https://ecommerce.routemisr.com",this.useremail="",this.restCodech=""}forgotPassword(o){return this._HttpClient.post(this.baseUrl+"/api/v1/auth/forgotPasswords",o)}restCode(o){return this._HttpClient.post(this.baseUrl+"/api/v1/auth/verifyResetCode",o)}changeforgotenpassword(o){return this._HttpClient.put(this.baseUrl+"/api/v1/auth/resetPassword",o)}static#t=this.\u0275fac=function(e){return new(e||s)(t.LFG(l.eN))};static#o=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var u=a(1120);function m(s,i){if(1&s&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&s){const o=t.oxw(2);t.xp6(1),t.Oqu(o.userMsg)}}function f(s,i){1&s&&t._UZ(0,"i",9)}function d(s,i){if(1&s){const o=t.EpF();t.TgZ(0,"section",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.handelforgotpas())}),t.TgZ(2,"label",3),t._uU(3,"Enter Email"),t.qZA(),t._UZ(4,"input",4),t.YNc(5,m,2,1,"p",5),t.TgZ(6,"button",6),t._uU(7," Forgot Password Login "),t.YNc(8,f,1,0,"i",7),t.qZA()()()}if(2&s){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.forgotpassword),t.xp6(4),t.Q6J("ngIf",o.userMsg),t.xp6(3),t.Q6J("ngIf",o.lodingSpin)}}function h(s,i){if(1&s&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&s){const o=t.oxw(2);t.xp6(1),t.Oqu(o.userMsg)}}function w(s,i){1&s&&t._UZ(0,"i",9)}function _(s,i){if(1&s){const o=t.EpF();t.TgZ(0,"section",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.handelrestCode())}),t.TgZ(2,"label",10),t._uU(3,"Enter Reset Code"),t.qZA(),t._UZ(4,"input",11),t.YNc(5,h,2,1,"p",5),t.TgZ(6,"button",6),t._uU(7," Reset Code Login "),t.YNc(8,w,1,0,"i",7),t.qZA()()()}if(2&s){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.restCode),t.xp6(4),t.Q6J("ngIf",o.userMsg),t.xp6(3),t.Q6J("ngIf",o.lodingSpin)}}function x(s,i){if(1&s&&(t.TgZ(0,"p",15),t._uU(1),t.qZA()),2&s){const o=t.oxw(2);t.xp6(1),t.Oqu(o.userMsg)}}function C(s,i){1&s&&t._UZ(0,"i",9)}function F(s,i){if(1&s){const o=t.EpF();t.TgZ(0,"section",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.handelchanforpass())}),t.TgZ(2,"label",12),t._uU(3,"Write your new password"),t.qZA(),t._UZ(4,"input",13),t.YNc(5,x,2,1,"p",14),t.TgZ(6,"button",6),t._uU(7," Rest Password Login "),t.YNc(8,C,1,0,"i",7),t.qZA()()()}if(2&s){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.changeforgotpassword),t.xp6(4),t.Q6J("ngIf",o.userMsg),t.xp6(3),t.Q6J("ngIf",o.lodingSpin)}}let Z=(()=>{class s{constructor(o,e){this._ForgotpasswordService=o,this._router=e,this.step1=!0,this.step2=!1,this.step3=!1,this.userEmail="",this.lodingSpin=!1,this.userMsg="",this.forgotpassword=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.restCode=new n.cw({resetCode:new n.NI("",[n.kI.required])}),this.changeforgotpassword=new n.cw({newPassword:new n.NI("",[n.kI.required])})}handelforgotpas(){let o=this.forgotpassword.value;this.userEmail=o.email,console.log(o),this.lodingSpin=!0,this._ForgotpasswordService.forgotPassword(o).subscribe({next:e=>{this.userMsg=e.message,this.lodingSpin=!1,console.log(e),"success"==e.statusMsg&&(this.step1=!1,this.step2=!0,this.step3=!1)},error:e=>{this.userMsg=e.error.message,console.log(e),this.lodingSpin=!1}})}handelrestCode(){this.lodingSpin=!0;let o=this.restCode.value;console.log(o),this._ForgotpasswordService.restCode(o).subscribe({next:e=>{this.userMsg=e.message,this.lodingSpin=!1,console.log(e),"Success"==e.status&&(this.step1=!1,this.step2=!1,this.step3=!0)},error:e=>{this.userMsg=e.error.message,console.log(e),this.lodingSpin=!1}})}handelchanforpass(){this.lodingSpin=!0;let o=this.changeforgotpassword.value;o.email=this.userEmail,console.log(o),this._ForgotpasswordService.changeforgotenpassword(o).subscribe({next:e=>{this.userMsg=e.message,this.lodingSpin=!1,console.log(e),e.token&&(localStorage.setItem("userToken",e.token),this._router.navigate(["/home"]))},error:e=>{this.userMsg=e.error.message,console.log(e),this.lodingSpin=!1}})}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(g),t.Y36(u.F0))};static#o=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgot-password"]],standalone:!0,features:[t.jDz],decls:3,vars:3,consts:[["class","w-50 mx-auto rounded mt-5 bg-main-light p-3 shadow",4,"ngIf"],[1,"w-50","mx-auto","rounded","mt-5","bg-main-light","p-3","shadow"],[3,"formGroup","ngSubmit"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],["class","alert alert-danger w-75 mx-auto  mt-1 p-1 mb-0",4,"ngIf"],[1,"main-btn","w-100","mt-3"],["class","fas fa-spin fa-spinner",4,"ngIf"],[1,"alert","alert-danger","w-75","mx-auto","mt-1","p-1","mb-0"],[1,"fas","fa-spin","fa-spinner"],["for","resetCode"],["formControlName","resetCode","id","resetCode","type","text",1,"form-control"],["for","newPassword"],["formControlName","newPassword","id","newPassword","type","password",1,"form-control"],["class","alert alert-danger w-75 mx-auto p-1 mt-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-75","mx-auto","p-1","mt-1","mb-0"]],template:function(e,r){1&e&&(t.YNc(0,d,9,3,"section",0),t.YNc(1,_,9,3,"section",0),t.YNc(2,F,9,3,"section",0)),2&e&&(t.Q6J("ngIf",r.step1),t.xp6(1),t.Q6J("ngIf",r.step2),t.xp6(1),t.Q6J("ngIf",r.step3))},dependencies:[p.ez,p.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return s})()}}]);